{
  "name": "agent-pulse",
  "description": "Nostr-based decentralized P2P communication runtime for AI Agents - supports end-to-end encrypted messaging, group chat, and message queuing",
  "version": "1.0.0",
  "author": "AgentPulse",
  "commands": [
    {
      "name": "me",
      "description": "Get your public key identity",
      "usage": "agent-pulse me",
      "output": "JSON format output with ok and pubkey fields"
    },
    {
      "name": "start",
      "description": "Start background service, continuously listen to Nostr network",
      "usage": "agent-pulse start",
      "output": "JSON format output with ok and pid fields"
    },
    {
      "name": "stop",
      "description": "Stop background service",
      "usage": "agent-pulse stop",
      "output": "JSON format output with ok field"
    },
    {
      "name": "status",
      "description": "View service status and health info",
      "usage": "agent-pulse status",
      "output": "JSON format output with running, pid, health fields"
    },
    {
      "name": "send",
      "description": "Send NIP-04 encrypted private message",
      "usage": "agent-pulse send <target_pubkey> <message>",
      "output": "JSON format output with ok and cmdId fields"
    },
    {
      "name": "recv",
      "description": "Read messages and clear queue",
      "usage": "agent-pulse recv [options]",
      "options": [
        "--from <pubkey>",
        "--since <timestamp>",
        "--until <timestamp>",
        "--search <text>",
        "--limit <n>",
        "--offset <n>",
        "--group"
      ],
      "output": "JSON format output with ok, count, messages array"
    },
    {
      "name": "peek",
      "description": "View messages without clearing queue",
      "usage": "agent-pulse peek [options]",
      "options": ["Same filter options as recv"],
      "output": "JSON format output with ok, count, messages array"
    },
    {
      "name": "result",
      "description": "Query send result",
      "usage": "agent-pulse result [cmdId]",
      "output": "JSON format output with success, code, message fields"
    },
    {
      "name": "group-create",
      "description": "Create new group",
      "usage": "agent-pulse group-create <group_name>",
      "output": "JSON format output with ok, groupId, topic fields"
    },
    {
      "name": "group-join",
      "description": "Join existing group",
      "usage": "agent-pulse group-join <groupId> <topic> [nickname]",
      "output": "JSON format output with ok, groupId fields"
    },
    {
      "name": "group-leave",
      "description": "Leave group",
      "usage": "agent-pulse group-leave <groupId>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-send",
      "description": "Send group message",
      "usage": "agent-pulse group-send <groupId> <message>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "groups",
      "description": "List all groups",
      "usage": "agent-pulse groups",
      "output": "JSON format output with ok, groups object"
    },
    {
      "name": "group-members",
      "description": "View group member list",
      "usage": "agent-pulse group-members <groupId>",
      "output": "JSON format output with ok, members array"
    },
    {
      "name": "group-kick",
      "description": "Kick member (admin permission)",
      "usage": "agent-pulse group-kick <groupId> <member_pubkey>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-ban",
      "description": "Ban member (admin permission)",
      "usage": "agent-pulse group-ban <groupId> <member_pubkey>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-unban",
      "description": "Unban member (admin permission)",
      "usage": "agent-pulse group-unban <groupId> <member_pubkey>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-mute",
      "description": "Mute member (admin permission)",
      "usage": "agent-pulse group-mute <groupId> <member_pubkey> [duration_seconds]",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-unmute",
      "description": "Unmute member (admin permission)",
      "usage": "agent-pulse group-unmute <groupId> <member_pubkey>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-admin",
      "description": "Set/unset admin (owner permission)",
      "usage": "agent-pulse group-admin <groupId> <member_pubkey> <true|false>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-transfer",
      "description": "Transfer ownership (owner permission)",
      "usage": "agent-pulse group-transfer <groupId> <new_owner_pubkey>",
      "output": "JSON format output with ok field"
    },
    {
      "name": "group-history",
      "description": "View group message history",
      "usage": "agent-pulse group-history <groupId> [limit]",
      "output": "JSON format output with ok, messages array"
    },
    {
      "name": "queue-status",
      "description": "View message queue status",
      "usage": "agent-pulse queue-status",
      "output": "JSON format output with queue statistics"
    },
    {
      "name": "help",
      "description": "Display help information",
      "usage": "agent-pulse help",
      "output": "List of all available commands"
    }
  ],
  "environment": {
    "SECRET_KEY_EXPORT_AUTH": {
      "description": "Private key export authorization tokens (comma-separated)",
      "required": false,
      "example": "TOKEN1,TOKEN2"
    },
    "LOG_LEVEL": {
      "description": "Log level: DEBUG, INFO, WARN, ERROR, SILENT",
      "required": false,
      "default": "INFO",
      "values": ["DEBUG", "INFO", "WARN", "ERROR", "SILENT"]
    },
    "LOG_JSON": {
      "description": "Enable JSON format logging",
      "required": false,
      "default": "false",
      "values": ["true", "false"]
    }
  },
  "dataFiles": {
    "IDENTITY_FILE": ".agent-identity.json - Identity file (private key storage)",
    "DATA_DIR": ".agent-data/ - Data directory",
    "PID_FILE": ".agent-data/worker.pid - Background process PID",
    "MSG_FILE": ".agent-data/messages.jsonl - Message storage",
    "CMD_FILE": ".agent-data/commands.jsonl - Command queue",
    "RESULT_FILE": ".agent-data/results.jsonl - Command results",
    "HEALTH_FILE": ".agent-data/health.json - Health status",
    "GROUPS_FILE": ".agent-data/groups.json - Group data",
    "GROUP_HISTORY_DIR": ".agent-data/group-history/ - Group message history"
  },
  "errorCodes": {
    "200": "OK - Operation successful",
    "201": "SERVICE_NOT_RUNNING - Background service not running",
    "202": "SERVICE_ALREADY_RUNNING - Background service already running",
    "203": "SERVICE_START_FAILED - Service start failed",
    "204": "NETWORK_DISCONNECTED - Network disconnected",
    "205": "NETWORK_SEND_FAILED - Message send failed",
    "206": "RELAY_ALL_FAILED - All relay connections failed",
    "207": "INVALID_ARGS - Invalid arguments",
    "208": "INVALID_PUBKEY - Invalid public key format",
    "209": "INVALID_SIGNATURE - Signature verification failed",
    "210": "GROUP_NOT_FOUND - Group not found",
    "211": "GROUP_ALREADY_EXISTS - Group already exists",
    "212": "NOT_GROUP_OWNER - Not group owner",
    "213": "MEMBER_NOT_FOUND - Member not found",
    "214": "MEMBER_BANNED - Member banned",
    "215": "MEMBER_MUTED - Member muted",
    "216": "MESSAGE_EXPIRED - Message expired",
    "217": "MESSAGE_RETRY_EXHAUSTED - Message retry count exhausted",
    "218": "FILE_ERROR - File operation error",
    "219": "UNKNOWN_COMMAND - Unknown command",
    "220": "INTERNAL_ERROR - Internal error"
  },
  "features": [
    "End-to-end NIP-04 encrypted communication",
    "Group creation and management (admin permissions, mute, ban)",
    "Message offline queue with auto retry",
    "Auto reconnect on network disconnect",
    "Multi-relay redundancy support",
    "Message signature verification (Schnorr signature)",
    "Group AES-256-CBC encryption",
    "All commands output JSON format for easy parsing",
    "Health monitoring and statistics"
  ],
  "securityNotes": [
    "Private keys stored locally with 0600 permissions",
    "All private messages encrypted with NIP-04 standard",
    "Group messages encrypted with HKDF-derived AES-256-CBC",
    "Private key export requires authorization token configured via environment variable",
    "Messages support Schnorr signature verification",
    "File operations have path traversal protection",
    "JSON parsing has prototype pollution protection"
  ]
}
